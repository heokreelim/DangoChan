<!DOCTYPE html>
<html lang="ko" xmlns:th="http://thymeleaf.org" xmlns:sec="http://thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
    <div th:fragment="nav" class="nav glass-effect">
        <div class="nav-bg">
            <div class="logo">
                <a th:href="@{/home}"><b>ğŸ¡ã ã‚“ã”ã¡ã‚ƒã‚“</b></a>
            </div>
            <div class="profile-wrap">
                <input type="hidden" id="userId" name="userId" th:value="${userId}">
                <div class="profile-picture">
                    <a th:href="@{/user/mypage}">
                    <!-- í”„ë¡œí•„ ì‚¬ì§„ í‘œì‹œ -->
                    <!-- userInfoê°€ ì¡´ì¬í•  ë•Œë§Œ ë Œë”ë§ -->
                    <th:block th:if="${userInfo != null}">
                        <img th:src="@{'/images/profiles/profile_' + ${userInfo.profileImage} + '.jpg'}" alt="í”„ë¡œí•„ ì‚¬ì§„" />
                    </th:block>
                    
                    <!-- userInfoê°€ nullì¼ ê²½ìš° ê¸°ë³¸ ì´ë¯¸ì§€ ì¶œë ¥ -->
                    <th:block th:if="${userInfo == null}">
                        <img th:src="@{/images/profiles/profile_0.jpg}" alt="ê¸°ë³¸ í”„ë¡œí•„ ì‚¬ì§„" />
                    </th:block>
                    </a>
                </div> <!-- profile-picture end -->
                <div class="nickname">
                    <p class="userName" id="userName">
                        [[${#authentication.principal.userName}]]
                    </p>
                </div> <!-- nickname end -->
            </div> <!-- profile-wrap end -->
            <div class="statistics-wrap">
                <ul class="statistics-list">
                    <!-- ì—°ì† ì¶œì„ì¼ -->
                    <li th:if="${attendanceStreak != null}">
                        <p>[[${attendanceStreak}]]ì¼ ì—°ì†ìœ¼ë¡œ ì¶œì„ì¤‘ì…ë‹ˆë‹¤.</p>
                    </li>
                    <!-- ì˜¤ëŠ˜ í•™ìŠµì‹œê°„ -->
                    <li th:if="${todayStudyTimeFormatted != null}">
                        <p>ì˜¤ëŠ˜ í•™ìŠµëŸ‰ : [[${todayStudyTimeFormatted}]]</p>
                    </li>
                    <!-- ë‘ ë¦¬ìŠ¤íŠ¸ê°€ ëª¨ë‘ ë¹„ì–´ìˆì„ ê²½ìš° -->
                    <li th:if="${#lists.isEmpty(personalAchievements)} and ${#lists.isEmpty(communityAchievements)}">
                        <p>ğŸ¯ ì•„ì§ ë‹¬ì„±í•œ ì—…ì ì´ ì—†ì–´ìš”.</p>
                    </li>
                    <li th:each="ach : ${personalAchievements}">
                        <p>ğŸ… [[${ach}]]</p>
                    </li>
                    <li th:each="ach : ${communityAchievements}">
                        <p>ğŸ‰ [[${ach}]]</p>
                    </li>
                </ul>
            </div> <!-- statistics-wrap end -->
            <div class="calendar-wrap">
                    <div id="currentMonth" class="nav-currentMonth"></div>
                    <table class="nav-calendar">
                        <thead>
                            <tr>
                                <th>ì¼</th>
                                <th>ì›”</th>
                                <th>í™”</th>
                                <th>ìˆ˜</th>
                                <th>ëª©</th>
                                <th>ê¸ˆ</th>
                                <th>í† </th>
                            </tr>
                        </thead>
                        <tbody id="calendarBody"></tbody>
                    </table>
            </div> <!-- calendar-wrap end -->
            <div class="authentication-wrap">
                <th:block sec:authorize="isAnonymous()">
                    <div><a th:href="@{/user/login}">ë¡œê·¸ì¸</a></div>
                </th:block>
                <th:block sec:authorize="isAuthenticated()">
                    <div><a th:href="@{/user/logout}">ë¡œê·¸ì•„ì›ƒ</a></div>
                </th:block>
            </div><!-- authentication end -->
        </div><!-- nav-bg end -->
    </div>
</body>
</html>